<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <style>
        .wrapper {
            visibility: hidden;
        }

        .header {
            width: 100%;
            border-bottom: 1px solid #76859c;
            padding: 5px 0px;
            position: fixed;
            top: 0;
            z-index: 1;
            background-color: #001F3F;;
        }

        .card {
            margin-top: 10px;
        }

        .spinner {
            position: fixed;
            z-index: 999;
            height: 2em;
            width: 2em;
            overflow: show;
            margin: auto;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            visibility: visible;
        }
        .content {
            margin-top:100px;
            background-color: #aaa;
        }
    </style>
    <link rel="stylesheet" href="./css/home.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script>
        function deleteResults() {
            result = document.getElementById("results")
            result.innerHTML = ""
        }
        function deleteComments() {
            result = document.getElementById("comments")
            result.innerHTML = ""
        }
        function visibleSpinner() {
            document.getElementById("wrapper").style.visibility = 'invisible'
            document.getElementById("spinner").style.visibility = 'visible'
        }
        function searchResults(movieId, movieName, imageUrl, year, score, genre) {
            document.getElementById("more250").style.visibility = 'hidden'
            document.getElementById("more").style.visibility = 'visible'
            result = document.getElementById("results")
            result.innerHTML += '<div class="card" style="width: 18rem;">' +
                '<img src="' + imageUrl + '" class="card-img-top img-fluid">' +
                '<div class="card-body">' +
                '<h5 class="card-title">' + movieName + '</h5>' +
                '</div>' +
                '<ul class="list-group list-group-flush">' +
                '<li class="list-group-item"> Year: ' + year + '</li>' +
                '<li class="list-group-item"> Imdb Rating: ' + score + '</li>' +
                '<li class="list-group-item"> Genre: ' + genre + '</li>' +
                '</ul>' +
                '<div class="card-body">' +
                '<button class="card-link btn btn-primary" id="download" val=' + movieId + '>Torrent</button>' +
                '</div>' +
                '<div class="card-body">' +
                '<button class="card-link btn btn-primary" id="downloadSubtitle" val=' + movieId + ',' + movieName.split(" ").join("%20") + '>Subtitle</button>' +
                '</div>' +
                '<div class="card-body">' +
                '<button type="button" id="getComments" val=' + movieId +' class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">' +
                'Comments' +
                '</button>' +
                '</div>' +
                '</div>'
            document.getElementById("wrapper").style.visibility = 'visible'
            document.getElementById("spinner").style.visibility = 'hidden'
        }
        function topListResults(movieId, movieName, imageUrl, year, score) {
            result = document.getElementById("results")
            result.innerHTML += '<div class="card" style="width: 18rem;">' +
                '<img src="' + imageUrl + '" class="card-img-top img-fluid">' +
                '<div class="card-body">' +
                '<h5 class="card-title">' + movieName + '</h5>' +
                '</div>' +
                '<ul class="list-group list-group-flush">' +
                '<li class="list-group-item"> Year: ' + year + '</li>' +
                '<li class="list-group-item"> Imdb Rating: ' + score + '</li>' +
                '</ul>' +
                '<div class="card-body">' +
                '<button class="card-link btn btn-primary" id="download" val=' + movieId + '>Torrent</button>' +
                '</div>' +
                '<div class="card-body">' +
                '<button class="card-link btn btn-primary" id="downloadSubtitle" val=' + movieId + ',' + movieName.split(" ").join("%20") + '>Subtitle</button>' +
                '</div>' +
                '<div class="card-body">' +
                '<button type="button" id="getComments" val=' + movieId +' class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">' +
                'Comments' +
                '</button>' +
                '</div>' +
                '</div>'
            document.getElementById("wrapper").style.visibility = 'visible'
            document.getElementById("spinner").style.visibility = 'hidden'
        }
        function printComment(comment) {
            var div = document.getElementById('comments')
            var card = document.createElement('div')
            card.className = 'card'
            var cardbody = document.createElement('div')
            cardbody.className='card-body'
            cardbody.innerText = comment
            card.appendChild(cardbody)
            div.appendChild(card)
        }
        window.onload = function () {
            document.getElementById("more").style.visibility = 'hidden'
            document.getElementById("hata").style.visibility = 'hidden'
            topList();
        }
    </script>
</head>

<body>
    <div class="spinner" id="spinner">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <div class="wrapper" id="wrapper">
        <div class="header">
            <div class="row">
                <div class="offset-md-4 col-md-4">
                    <div class="form-group">
                        <input id="search" class="form-control" type="text" placeholder="Search.." />
                    </div>
                    <button class="btn btn-primary" onClick='searchMovie(document.getElementById("search").value)'>
                        Search
                    </button>
                </div>
            </div>
        </div>
        <div class="content">
            <div class="row">
                <div class="offset-md-4 col-md-4" id="results">

                </div>
            </div>
            <div class="row">
                <div class="offset-md-4 col-md-4 d-flex justify-content-center">
                    <button class="btn btn-success" id="more" onClick='searchMore()'>
                        See more.
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="offset-md-4 col-md-4 d-flex justify-content-center">
                    <button class="btn btn-success" id="more250" onClick='topList()'>
                        See more.
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Yorumlar</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="comments">
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <button type="button" id="hata" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script>
        $(document).on('click', '#download', function (e) {
            downloadTorrent(e.target.getAttribute("val"))
        })
        $(document).on('click', '#downloadSubtitle', function (e) {
            downloadSubtitle(e.target.getAttribute("val"))
        })
        $(document).on('click', '#getComments', function (e) {
            getComments(e.target.getAttribute("val"))
        })
        function printError(content) {
            deleteComments()
            var div = document.getElementById('comments')
            var card = document.createElement('div')
            card.className = 'card'
            var cardbody = document.createElement('div')
            cardbody.className='card-body'
            cardbody.innerText = content
            card.appendChild(cardbody)
            div.appendChild(card)
            hata = document.getElementById('hata')
            hata.click()
        }
    </script>
</body>

</html>